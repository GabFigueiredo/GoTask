@let task = _data.Task;

<form
  [formGroup]="CommentForm"
  (ngSubmit)="handleSubmit()"
  class="border-1 border-border-light bg-accent-brand-light w-full w-max-[617px] rounded-xl">
  <div
    class="flex w-full p-[1rem] items-center justify-between border-b-1 border-border-light"
  >
    <div class="flex gap-1">
      <img src="assets/Star.svg" />
      <h2>Comentar tarefa</h2>
    </div>
    <img src="assets/Close-button.svg" (click)="closeModal(this.taskCommentChanged)" />
  </div>
  <div class="p-4 space-y-5">
    <h2 class="text-[18px] font-semibold text-text-heading">
      {{ task.name }}
    </h2>
    <div class="space-y-2">
      <span class="text-[14px] font-semibold text-text-heading">Descrição</span>
      <p class="text-[1rem] text-text-paragraph">
        {{ task.description }}
      </p>
    </div>

    <div class="w-full p-5 space-y-5">
      <div class="flex flex-col gap-5">
        <span class="text-[14px] font-semibold text-text-heading"
          >Comentários</span
        >
        <div class="flex gap-2">
          <input
            class="p-3 w-full rounded-xl border-1 border-border-light placeholder:text-text-placeholder placeholder:text-[0.875rem]"
            placeholder="Adicione um comentário"
            formControlName="text"
          />
          <button
            class="{{`px-4 py-2 not-[]:text-text-invert text-[0.875rem] font-semibold rounded-xl text-text-invert ${
            CommentForm.invalid
            ? 'bg-[#D7D8D8]'
            : 'bg-[#2A89EF]'
            }`}}"
            type="submit"
            [disabled]="CommentForm.invalid"
          >
            Adicionar
          </button>
        </div>
      </div>
      @for(comment of task.comments; track comment.created_at) {
        <div class="space-y-5">
          <p class="text-[#374151] text-[0.875rem]">
            {{ comment.text }}
          </p>
          <div class="space-x-4">
            <span class="text-[12px] text-[#9CA3AF]">{{ comment.created_at }}</span>
            <span
              (click)="deleteComment(comment.id)"
              class="text-[12px] text-text-heading underline font-semibold cursor-pointer"
              >Apagar</span
            >
          </div>
        </div>
      }
    </div>
  </div>
</form>
